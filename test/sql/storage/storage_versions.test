# name: test/sql/storage/storage_versions.test
# description: Test attach storage various versions
# group: [storage]

# These files were created with vector-size 2048
require vector_size 2048

# File created via "ATTACH 'empty64.db' (STORAGE_VERSION 'v1.1.0')"
statement ok
ATTACH '{DATA_DIR}/storage/empty64.db' (READ_ONLY);

# File created via "ATTACH 'empty65.db' (STORAGE_VERSION 'v1.2.0')"
statement ok
ATTACH '{DATA_DIR}/storage/empty65.db' (READ_ONLY);

# File created via "ATTACH 'empty66.db' (STORAGE_VERSION 'v1.3.0')"
statement ok
ATTACH '{DATA_DIR}/storage/empty66.db' (READ_ONLY);

# File created via "ATTACH 'empty67.db' (STORAGE_VERSION 'v1.4.0')"
statement ok
ATTACH '{DATA_DIR}/storage/empty67.db' (READ_ONLY);

# for duckdb version v1.4.3
# Files created via `duckdb empty67_init.db -c "CHECKPOINT;"
statement ok
ATTACH '{DATA_DIR}/storage/empty67_init.db' (READ_ONLY);

query I
SELECT tags FROM duckdb_databases() WHERE database_name LIKE 'empty67_init%' ORDER BY database_name;
----
{storage_version=v1.0.0+}

query I
SELECT tags FROM duckdb_databases() WHERE database_name LIKE 'empty%' ORDER BY database_name;
----
{storage_version=v1.0.0+}
{storage_version=v1.2.0+}
{storage_version=v1.3.0+}
{storage_version=v1.4.0+}
{storage_version=v1.0.0+}

