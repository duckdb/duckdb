# name: test/sql/storage/types/variant/variant_index.test
# group: [variant]

load __TEST_DIR__/variant_index.db

statement error
CREATE TABLE tbl(col VARIANT UNIQUE, b INTEGER)
----
Invalid type Error: Invalid Type [VARIANT]: Invalid type for index key.

# See FIXME in art.cpp:ART::ART to support nested types
mode skip

statement ok
INSERT into tbl select {'a': i, 'b': i % 5} col, i from range(1000) t(i)

query I
select b from tbl where col == {'b': 2, 'a': 2}
----
