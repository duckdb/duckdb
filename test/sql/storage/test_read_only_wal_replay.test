# name: test/sql/storage/test_read_only_wal_replay.test
# description: Test read-only WAL replay
# group: [storage]

statement ok
SET checkpoint_threshold='1TB';

statement ok
PRAGMA disable_checkpoint_on_shutdown;

statement ok
ATTACH '__TEST_DIR__/read_only_wal_replay.db' AS db;

statement ok
CREATE TABLE db.my_tbl(i INTEGER PRIMARY KEY);

statement ok
INSERT INTO db.my_tbl FROM range(200_000);

statement ok
DETACH db;

statement ok
ATTACH '__TEST_DIR__/read_only_wal_replay.db' AS db (READ_ONLY)

statement ok
DETACH db
