# name: test/sql/storage/optimistic_write/optimistic_write_not_trigger_checkpoint.test
# description: Test optimistic write does not trigger a checkpoint
# group: [optimistic_write]

load __TEST_DIR__/optimistic_write_not_trigger_checkpoint.db

statement ok
PRAGMA disable_checkpoint_on_shutdown

statement ok
SET checkpoint_threshold = '5 KB'

query I
SELECT wal_size == '0 bytes' FROM pragma_database_size();
----
1

statement ok
CREATE TABLE t1 (id INTEGER, c0 DOUBLE)

statement ok
INSERT INTO t1 SELECT *, random() FROM range(200000)

query I
SELECT wal_size != '0 bytes' FROM pragma_database_size();
----
1
