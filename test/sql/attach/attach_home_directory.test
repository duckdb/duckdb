# name: test/sql/attach/attach_home_directory.test
# description: Test resolution of ATTACH with home directory
# group: [attach]

statement ok
ATTACH '__TEST_DIR__/home_dir.db' AS s1

statement ok
CREATE TABLE s1.integers AS FROM range(10) t(i);

query I
SELECT SUM(i) FROM s1.integers
----
45

statement ok
SET home_directory='__TEST_DIR__'

# already attached
statement error
ATTACH '~/home_dir.db' AS s2
----
already attached by database "s1"

statement ok
DETACH s1

statement ok
ATTACH '~/home_dir.db' AS s1

query I
SELECT SUM(i) FROM s1.integers
----
45

statement ok
DETACH s1
