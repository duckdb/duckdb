# name: test/sql/parallelism/interquery/parallel_dependencies_catalog_operations.test_slow
# description: Test concurrent dependencies with catalog operations
# group: [interquery]

# # FIXME: this test triggers an internal exception
mode skip

concurrentloop threadid 0 11

loop x 0 100

onlyif threadid=0
statement maybe
CREATE SCHEMA s1
----
already exists

onlyif threadid=0
statement maybe
DROP SCHEMA s1 CASCADE
----

endloop

loop x 0 100

onlyif threadid>0
statement maybe
CREATE TABLE s1.tbl${threadid}(i INTEGER)
----

onlyif threadid>0
statement maybe
INSERT INTO s1.tbl${threadid} VALUES (1), (2), (3), (4), (5)
----

onlyif threadid>0
statement maybe
CREATE VIEW s1.view${threadid} AS SELECT 42
----

onlyif threadid>0
statement maybe
FROM s1.tbl;
----

onlyif threadid>0
statement maybe
FROM s1.view;
----

endloop

endloop
