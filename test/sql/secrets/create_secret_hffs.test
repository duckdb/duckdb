# name: test/sql/secrets/create_secret_hffs.test
# description: Test huggingface secrets
# group: [secrets]

statement ok
PRAGMA enable_verification;

require httpfs

statement ok
set allow_persistent_secrets=false;

# Generic bearer token secret is now available, not actually used yet
statement ok
CREATE SECRET b1 (
	TYPE BEARER,
    TOKEN 'bla'
)

# Manually setting token is simplest
statement ok
CREATE SECRET hf1 (
	TYPE HUGGINGFACE,
    TOKEN 'bla'
)

# Cache provider will automatically try to fetch the token from the cache
statement ok
CREATE SECRET hf2 (
	TYPE HUGGINGFACE,
    PROVIDER 'credential_chain'
)

# Note that we skip the hf2 secret here: it might have been created or not, depending on the current environment 
query IIII
SELECT name, type, provider, scope FROM duckdb_secrets() where name != 'hf2' order by name;
----
b1	bearer	config	[]
hf1	huggingface	config	[hf://]
