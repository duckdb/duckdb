# name: test/sql/index/art/insert_update_delete/test_art_update_with_dict_fsst_and_replay.test
# description: Test updating a column with an index that is compressed with DICT_FSST, then replay the update.
# group: [insert_update_delete]

load __TEST_DIR__/foo.db readwrite v1.4.2

statement ok
PRAGMA disable_checkpoint_on_shutdown;

statement ok
SET wal_autocheckpoint='1TB'

statement ok
CREATE OR REPLACE TABLE bar (col1 VARCHAR, col2 VARCHAR UNIQUE)

statement ok
INSERT INTO bar (col1, col2) VALUES (NULL, 'one');

statement ok
CHECKPOINT

statement ok
UPDATE bar AS original SET col1 = 'a'

restart

query I
SELECT col1 FROM bar WHERE col2 = 'one'
----
a
