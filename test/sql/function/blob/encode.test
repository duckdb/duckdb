# name: test/sql/function/blob/encode.test
# description: Test blob encode/decode functions
# group: [blob]

statement ok
PRAGMA enable_verification

# test basic encode/decode usage
query I
SELECT encode('Ã¼')
----
\xC3\xBC

query I
SELECT decode(encode('Ã¼'))
----
Ã¼

query I
SELECT try_decode(encode('Ã¼'))
----
Ã¼

query I
SELECT decode('\xF0\x9F\xA6\x86'::BLOB)
----
ðŸ¦†

query I
SELECT try_decode('\xF0\x9F\xA6\x86'::BLOB)
----
ðŸ¦†

# null byte
query I
SELECT decode('\x00'::BLOB)
----
\0

query I
SELECT try_decode('\x00'::BLOB)
----
\0

# test invalid decodes
statement error
SELECT decode('\xFF'::BLOB)
----

query I
SELECT try_decode('\xFF'::BLOB)
----
NULL

query I
SELECT decode(encode(a)) || a from (values ('hello'), ('world')) tbl(a);
----
hellohello
worldworld


