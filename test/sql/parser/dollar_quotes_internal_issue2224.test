# name: test/sql/parser/dollar_quotes_internal_issue2224.test
# description: Unexpected implicit conversion of string literal with full-width space
# group: [parser]

# we replace unicode spaces in query strings, except if they are quoted
# internal issue 2224 found that this doesn't work properly for double-dollar quoting
# lhs is regular space, rhs is a wider unicode space, so this should be false
#query I
#select $$ $$ = $$ã€€$$;
#----
#false

query I
select $tag$ $tag$ = $tag$ã€€$tag$;
----
false

# worked properly before for these quotes
query I
select ' ' = 'ã€€';
----
false

# just checking if parsing didn't break by fixing the dollar thing
query I
select $$$$ = '';
----
true

query I
select $tag$$tag$ = '';
----
true

query I
select '' = $$$$;
----
true

query I
select '' = $tag$$tag$;
----
true

query I
select $$ $$ = $$ã€€$$ or ' ' = 'ã€€';
----
false

query I
select $tag$ $tag$ = $tag$ã€€$tag$ or ' ' = 'ã€€';
----
false

query I
select ' ' = 'ã€€' or $$ $$ = $$ã€€$$;
----
false

query I
select ' ' = 'ã€€' or $tag$ $tag$ = $tag$ã€€$tag$;
----
false

# we can nest dollars if tags don't match
query I
select $tag$ $duck$ $tag$ = $tag$ã€€$duck$ã€€$tag$;
----
false

# of course we have to try this too
query I
select $ðŸ¦†$du ck$ðŸ¦†$ = $ðŸ¦†$duã€€ck$ðŸ¦†$;
----
false

# and some more unicode
query I
select $Ã¼$x x$Ã¼$ = $Ã¼$xã€€x$Ã¼$;
----
false
