# name: test/issues/internal/test_5457.test
# description: Internal Issue 5457: Error type regression: INTERRUPT thrown instead of OutOfMemory
# group: [internal]

require vector_size 2048

require block_size 262144

require no_alternative_verify

# 256 KiB is the lowest that we can go, which is a single page
# we take 300KiB to be slightly more lenient
statement ok
SET memory_limit='300KiB';

# this works
statement ok
SELECT 42;

# explain causes more allocations
statement error
EXPLAIN SELECT 42;
----
failed to allocate
