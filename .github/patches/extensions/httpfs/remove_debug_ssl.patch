diff --git a/test/sql/copy/parquet/parquet_encryption_mbedtls_openssl.test b/test/sql/copy/parquet/parquet_encryption_mbedtls_openssl.test
index 7e682cb..9cfe7dd 100644
--- a/test/sql/copy/parquet/parquet_encryption_mbedtls_openssl.test
+++ b/test/sql/copy/parquet/parquet_encryption_mbedtls_openssl.test
@@ -23,20 +23,22 @@ PRAGMA add_parquet_key('key256', '01234567891123450123456789112345')
 # test all valid AES key lengths
 foreach key_len 128 192 256
 
-# write files with OpenSSL enabled
-statement error
-COPY (SELECT 42 i) to '__TEST_DIR__/encrypted${key_len}_openssl.parquet' (ENCRYPTION_CONFIG {footer_key: 'key${key_len}'}, DEBUG_USE_OPENSSL randomval)
-----
-BOOL
+# write files with OpenSSL enabled (automatically)
+statement ok
+COPY (SELECT 42 i) to '__TEST_DIR__/encrypted${key_len}_openssl.parquet' (ENCRYPTION_CONFIG {footer_key: 'key${key_len}'})
 
-# write files with OpenSSL enabled
+# set mbedtls
 statement ok
-COPY (SELECT 42 i) to '__TEST_DIR__/encrypted${key_len}_openssl.parquet' (ENCRYPTION_CONFIG {footer_key: 'key${key_len}'}, DEBUG_USE_OPENSSL true)
+SET enable_mbedtls = 'true';
 
 # read OpenSSL encrypted files by using mbedtls
 query I
-SELECT * FROM read_parquet('__TEST_DIR__/encrypted${key_len}_openssl.parquet', encryption_config={footer_key: 'key${key_len}'}, debug_use_openssl=false)
+SELECT * FROM read_parquet('__TEST_DIR__/encrypted${key_len}_openssl.parquet', encryption_config={footer_key: 'key${key_len}'})
 ----
 42
 
+# disable mbedtls
+statement ok
+SET enable_mbedtls = 'false';
+
 endloop
